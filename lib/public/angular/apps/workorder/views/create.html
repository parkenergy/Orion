<alerts></alerts>
<header></header>

<div id="woCreate">
    <div class="row rowIssue">
        <div align="center">
            <i ng-show="loading" class="fa fa-refresh fa-spin createL"></i>
        </div>
    </div>
    <div class="row rowIssue" ng-show="!loading">
        <div class="highlight">
            <create-start-end-date
                workorder="workorder"
                set-wo-time-started="setWOTimeStarted(time)"
                set-wo-time-submitted="setWOTimeSubmitted(time)"
            >
            </create-start-end-date>
        </div>

        <div class="row">
            <create-user-info
                users="users"
                locations="locations"
                workorder="workorder"
                call-back="runCb(cb)"
            >
            </create-user-info>
        </div>

        <div class="row">
            <div class="col-md-3">
                <create-type-selector
                    workorder="workorder"
                    call-back="runCb(cb)"
                >
                </create-type-selector>
            </div>

            <div class="col-md-9">
                <div class="row">
                    <create-header-info
                        workorder="workorder"
                        call-back="runCb(cb)"
                        engine-models="engineModels"
                        frame-models="frameModels"
                        asset-types="assetTypes"
                        states="states"
                        applicationtypes="applicationTypes"
                    >
                    </create-header-info>
                </div>
                <div class="row" ng-show="workorder.type === 'Release' || workorder.type === 'Transfer' || workorder.type === 'Swap'">
                    <create-change-info
                        workorder="workorder"
                        call-back="runCb(cb)"
                        locations="locations"
                        engine-models="engineModels"
                        frame-models="frameModels"
                        asset-types="assetTypes"
                        states="states"
                    >
                    </create-change-info>
                </div>
            </div>
        </div>

        <div class="row">
            <create-unit-readings
                workorder="workorder"
                call-back="runCb(cb)"
                wo-input-matrix="woInputMatrix"
                engine-models="engineModels"
                frame-models="frameModels"
            >
            </create-unit-readings>
        </div>

        <div class="row">
            <create-comment
                workorder="workorder"
                call-back="runCb(cb)"
            >
            </create-comment>
        </div>

        <div class="row">
            <super-table  model="partsTableModel"></super-table>
            <div  class="panel panel-default">
                <div class="panel-heading">
                    <h1 class="panel-title">Parts Listed on Workorder</h1>

                </div>
                <div class="panel-body">
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th>Part Info</th>
                            <th>Related Labor Code</th>
                            <th>Quantity</th>
                            <th>Billable</th>
                            <th>Cost</th>
                            <th>Remove</th>
                            <!-- end column headers -->
                        </tr><!-- end header row -->
                        </thead><!-- end table header -->
                        <tbody>
                        <tr ng-repeat="obj in oList = (workorder.parts
                                        | filter:searchPhrase
                                        | orderBy:quantity:true)">
                            <td>
                                <div class="clearfix"><div ng-if="obj.number">{{obj.number}}</div></div>
                                <div ng-if="obj.description">{{obj.description}}</div>
                                <div ng-if="obj.componentName">{{obj.componentName}}</div>
                            </td>
                            <td>
                                <number-field
                                    placeholder-text="Quantity Used"
                                    data="obj.quantity"
                                    non-negative="true"
                                    name="quantity"
                                    max="100000"
                                    min="1"
                                    integer-only="true">
                                </number-field>
                            </td>
                            <td>
                                <old-check-box
                                    label-text="Is Part Billable?"
                                    data="obj.isBillable">
                                </old-check-box>
                                <old-check-box
                                    label-text="Is Part Warranty?"
                                    data="obj.isWarranty">
                                </old-check-box>
                            </td>
                            <td>
                                <price-field
                                    placeholder-text="0 - 1,000,000"
                                    data="obj.cost"
                                    non-negative="true"
                                    integer-only="false">
                                </price-field>
                            </td>
                            <!-- end row display fields -->
                            <td>
                                <button class="btn  btn-danger pull-right" ng-click="removePart(obj)">
                                    remove
                                </button>
                            </td><!-- end row buttons -->
                        </tr><!-- end table row -->
                        </tbody><!-- end tss-table-body -->
                    </table>
                </div><!-- end panel body -->
            </div><!-- end panel -->

        </div>

        <div>
            <button class="btn btn-lg btn-primary pull-right"
                    style="width: 90%; height: 100px; margin: 0px 5% 15px 5%;"
                    ng-click="debounceSubmit()">
                Submit
            </button>
            <div class="clearfix" style="height: 65px;"></div>
        </div>
    </div>
</div>
